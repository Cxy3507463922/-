# 🔒 智能实验室安全卫士 (Smart Guardian)

基于 **ESP32** 开发的智能电源管理系统，旨在解决实验室、寝室由于人走忘关灯或电器而造成的电力浪费和安全隐患。

## 🌟 核心功能

* **智能感应**：无人检测自动检测实验室/宿舍是否有人
* **人工决策**：系统检测到无人后，用户在网页选择"断电"或"保持通电" 
* **自动执行：**：根据决策或超时自动控制电源

## 🛠️ 硬件清单 (Bill of Materials)

* **控制器**：ESP32 DevKit V1。
* **传感器**：HC-SR501 人体红外感应模块。
* **执行器**：5V 继电器模块 (建议支持高/低电平可选)。
* **辅助**：LED灯 (用于演示)、面包板、杜邦线（公对母，母对母，公对公）。

## 🔌 硬件接线指南

请严格参考下表进行连线，注意 ESP32 的 VIN 引脚在接通 USB 时可提供近 5V 的输出，足以驱动传感器和继电器：

| 组件引脚 | ESP32 引脚 | 说明 |
| --- | --- | --- |
| **红外传感器 VCC** | **VIN (5V)** | 电源正极 |
| **红外传感器 OUT** | **GPIO 13** | 信号输入 |
| **红外传感器 GND** | **GND** | 电源负极 |
| **继电器 VCC** | **VIN (5V)** | 电源正极 |
| **继电器 IN** | **GPIO 12** | 逻辑控制 |
| **继电器 GND** | **GND** | 电源负极 |
| **检测线 母** | **GPIO 14** | 信号检测 |

继电器NO（常开）和COM（静触点）相当于开关，用导线接入到面包板电路中

面包板线路演示：

    负----LED-----继电器-----电阻----正

               |
               
            检测线（公）
## 💻 软件开发环境

本项目使用 **VS Code + PlatformIO** 插件进行开发与烧录。

* **框架**：Arduino。
* **波特率**：115200 (用于串口调试)。
* **配置文件**：`platformio.ini` 需配置 `board = esp32dev`。



## 📥 如何获取与部署
 
1. esp32_code文件夹(esp32_demo仅为演示用，功能是人离开红外传感器范围一分钟后自动断电)里面有些东西是VScode的Platform OI生成的内容（有一些path是自己电脑上的绝对路径，不能直接下载）。所以直接打开VScode，用Platform OI创建一个Project，把src下的main.cpp的内容复制替换，然后再在include文件夹下创建一个config.h，头文件里面的WIFI名称和密码以及服务器地址需要替换，注意家庭网络每次电脑重启后的IP地址是不一样的。

2. server文件夹里的代码我是用Pycharm写的（VScode应该也行），我在pycharm里创建了三个PY文件(main, database, config)，以及一个templates目录（这个名字不能改）（目录里面是4个HTML文件，index,action,error,status），其他文件也是自动生成的，可能会与自己电脑的路径有关。需要用到flask, json, request 等库（可以看到报错再下载）。

3. 该服务器与登录网页的操作者必须在同一局域网下。




---
